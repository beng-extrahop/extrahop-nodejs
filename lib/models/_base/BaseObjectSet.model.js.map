{"version":3,"sources":["../../../src/models/_base/BaseObjectSet.model.js"],"names":["Utils","require","Config","parse","fastCSV","fs","module","exports","format","JSON","stringify","forEach","baseObject","print","header","subkey","data","map","obj","fields","Object","keys","options","console","info","toCSV","filename","headers","stream","createWriteStream","CSV_DIR","encoding","writeToStream","on","error","err","params","generateId","Array"],"mappings":";;;;;;;;;;AAAA;;AAEA,IAAMA,QAAQC,QAAQ,8BAAR,CAAd;;eACmBA,QAAQ,kCAAR,C;IAAXC,M,YAAAA,M;;gBAEUD,QAAQ,UAAR,C;IAAVE,K,aAAAA,K;;AACR,IAAMC,UAAUH,QAAQ,UAAR,CAAhB;AACA,IAAMI,KAAKJ,QAAQ,IAAR,CAAX;;AAEAK,OAAOC,OAAP;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAE0B;AAAA,UAAfC,MAAe,uEAAN,IAAM;;AACtB,aAAOC,KAAKC,SAAL,CAAe,IAAf,EAAqB,IAArB,EAA2BF,SAAS,CAAT,GAAa,IAAxC,CAAP;AACD;AAJH;AAAA;AAAA,4BAMU;AACN,WAAKG,OAAL,CAAa;AAAA,eAAcC,WAAWC,KAAX,EAAd;AAAA,OAAb;AACD;AARH;AAAA;AAAA,gCAUmC;AAAA,6BAAzBC,MAAyB;AAAA,UAAzBA,MAAyB,+BAAhB,IAAgB;AAAA,UAAVC,MAAU,QAAVA,MAAU;;AAC/B,UAAMC,OAAOD,SAAS,KAAKE,GAAL,CAAS;AAAA,eAAOC,IAAIH,MAAJ,CAAP;AAAA,OAAT,CAAT,GAAwC,IAArD;AACA,UAAMI,SAASC,OAAOC,IAAP,CAAYL,KAAK,CAAL,CAAZ,CAAf;;AAEA,aAAOb,MAAMa,IAAN,EAAY,EAAEF,cAAF,EAAUK,cAAV,EAAZ,CAAP;AACD;AAfH;AAAA;AAAA,+BAiByB;AAAA,UAAdG,OAAc,uEAAJ,EAAI;;AACrBC,cAAQC,IAAR,CAAa,KAAKC,KAAL,CAAWH,OAAX,CAAb;AACD;AAnBH;AAAA;AAAA,sCAqB4C;AAAA,UAA7BI,QAA6B,SAA7BA,QAA6B;AAAA,UAAnBX,MAAmB,SAAnBA,MAAmB;AAAA,UAAXY,OAAW,SAAXA,OAAW;;AACxC,UAAMC,SAASvB,GAAGwB,iBAAH,CAAwB3B,OAAO4B,OAA/B,SAA0CJ,QAA1C,EAAsD,EAAEK,UAAU,MAAZ,EAAtD,CAAf;AACA,UAAMf,OAAOD,SAAS,KAAKE,GAAL,CAAS;AAAA,eAAOC,IAAIH,MAAJ,CAAP;AAAA,OAAT,CAAT,GAAwC,IAArD;;AAEAX,cAAQ4B,aAAR,CAAsBJ,MAAtB,EAA8BZ,IAA9B,EAAoC,EAAEW,gBAAF,EAApC,EAAiDM,EAAjD,CAAoD,OAApD,EAA6D;AAAA,eAAOV,QAAQW,KAAR,CAAcC,GAAd,CAAP;AAAA,OAA7D;AACD;AA1BH;AAAA;AAAA,+BA4BaC,MA5Bb,EA4BqB;AACjB,aAAOpC,MAAMqC,UAAN,CAAiBD,MAAjB,CAAP;AACD;AA9BH;;AAAA;AAAA,EAA6CE,KAA7C","file":"BaseObjectSet.model.js","sourcesContent":["// BaseObjectSet.model.js\n\nconst Utils = require('../../utils/BaseUtil.util.js');\nconst { Config } = require('../../constants/Global.constants');\n\nconst { parse } = require('json2csv');\nconst fastCSV = require('fast-csv');\nconst fs = require('fs');\n\nmodule.exports = class BaseObjectSet extends Array {\n\n  toString(format = true) {\n    return JSON.stringify(this, null, format ? 2 : null);\n  }\n\n  print() {\n    this.forEach(baseObject => baseObject.print());\n  }\n\n  toCSV({ header = true, subkey }) {\n    const data = subkey ? this.map(obj => obj[subkey]) : this;\n    const fields = Object.keys(data[0]);\n\n    return parse(data, { header, fields });\n  }\n\n  printCSV(options = {}) {\n    console.info(this.toCSV(options));\n  }\n\n  writeToCSV({ filename, subkey, headers }) {\n    const stream = fs.createWriteStream(`${Config.CSV_DIR}/${filename}`, { encoding: 'utf8' });\n    const data = subkey ? this.map(obj => obj[subkey]) : this;\n\n    fastCSV.writeToStream(stream, data, { headers }).on('error', err => console.error(err));\n  }\n\n  generateId(params) {\n    return Utils.generateId(params);\n  }\n};\n"]}